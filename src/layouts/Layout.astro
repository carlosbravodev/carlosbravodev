<!doctype html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width" />
    <link rel="icon" type="image/svg+xml" href="/favicon.svg" />
    <meta name="generator" content={Astro.generator} />
    <meta
      name="description"
      content="Carlos Bravo - Full Stack Developer. Building chaotic and beautiful digital experiences with neobrutalist design."
    />
    <meta property="og:title" content="Carlos Bravo | Full Stack Developer" />
    <meta
      property="og:description"
      content="Carlos Bravo - Full Stack Developer. Building chaotic and beautiful digital experiences."
    />
    <meta property="og:type" content="website" />
    <meta property="og:url" content="https://carlosbravodev.com" />
    <title>Carlos Bravo | Full Stack Developer</title>
  </head>
  <body>
    <slot />
  </body>
</html>

<style>
  html,
  body {
    margin: 0;
    width: 100%;
    height: 100%;
    background-color: #155dfb;
    scroll-behavior: smooth;
  }
</style>

<script>
  import { gsap } from "gsap";
  import { ScrollTrigger } from "gsap/ScrollTrigger";

  gsap.registerPlugin(ScrollTrigger);

  // Initial Load Animations (Hero)
  const tl = gsap.timeline();

  tl.from(".hero-text-box", {
    y: 100,
    opacity: 0,
    duration: 1.2,
    ease: "power4.out",
    delay: 0.2,
  })
    .from(
      ".hero-badge-box",
      {
        scale: 0,
        opacity: 0,
        duration: 1,
        ease: "elastic.out(1, 0.5)",
      },
      "-=0.8"
    )
    .from(
      ".hero-cta",
      {
        y: 20,
        opacity: 0,
        duration: 0.8,
        ease: "power2.out",
      },
      "-=0.6"
    )
    .from(
      ".hero-image-card",
      {
        x: 100,
        opacity: 0,
        rotation: 10,
        duration: 1.2,
        ease: "power3.out",
      },
      "-=1"
    );

  // Scroll Animations

  // Section Titles Reveal
  gsap.utils.toArray(".gsap-title-reveal").forEach((element: any) => {
    gsap.from(element, {
      scrollTrigger: {
        trigger: element,
        start: "top 85%",
        toggleActions: "play none none reverse",
      },
      y: 50,
      opacity: 0,
      duration: 0.8,
      ease: "power3.out",
    });
  });

  // About Cards Stagger
  const aboutCards = gsap.utils.toArray(".gsap-about-card");
  if (aboutCards.length > 0) {
    gsap.from(aboutCards, {
      scrollTrigger: {
        trigger: aboutCards[0] as Element,
        start: "top 80%",
        toggleActions: "play none none reverse",
      },
      y: 50,
      opacity: 0,
      stagger: 0.15,
      duration: 0.8,
      ease: "power2.out",
    });
  }

  // Project Cards Reveal (Individual Triggers to avoid bugs)
  gsap.utils.toArray(".gsap-project-card").forEach((card: any, i) => {
    gsap.from(card, {
      scrollTrigger: {
        trigger: card,
        start: "top 85%", // Trigger a bit earlier
        toggleActions: "play none none reverse",
      },
      y: 100,
      opacity: 0,
      duration: 0.8,
      ease: "power2.out",
      delay: i % 2 === 0 ? 0 : 0.2, // Simple manual stagger layout check
    });
  });

  // Contact Card Pop
  const contactCard = document.querySelector(".gsap-contact-card");
  if (contactCard) {
    gsap.from(contactCard, {
      scrollTrigger: {
        trigger: contactCard,
        start: "top 75%",
        toggleActions: "play none none reverse",
      },
      scale: 0.8,
      opacity: 0,
      duration: 1,
      ease: "elastic.out(1, 0.75)",
    });
  }

  // Footer Fade
  const footer = document.querySelector(".gsap-footer");
  if (footer) {
    gsap.from(footer, {
      scrollTrigger: {
        trigger: footer,
        start: "top 95%",
      },
      opacity: 0,
      y: 20,
      duration: 1,
    });
  }
</script>
